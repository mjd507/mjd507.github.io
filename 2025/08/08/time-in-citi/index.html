<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>代理和信托-项目总结 | Jiandong</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/pure-min.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="https://unpkg.com/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script src="https://www.googletagmanager.com/gtag/js?id=G-566LR096XR" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-566LR096XR');
</script><script type="text/javascript" src="https://unpkg.com/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="https://unpkg.com/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="https://unpkg.com/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">代理和信托-项目总结</h1><a id="logo" href="/.">Jiandong</a><p class="description">Stop stopping</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">代理和信托-项目总结</h1><div class="post-meta">2025-08-08<span> | </span><span class="category"><a href="/categories/Big-Back-End/">Big-Back-End</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">1.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%80%BA%E5%88%B8%E5%8F%91%E8%A1%8C-Issuance"><span class="toc-number">2.</span> <span class="toc-text">债券发行(Issuance)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#file-mapper"><span class="toc-number">2.1.</span> <span class="toc-text">file-mapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#skeleton-instrument"><span class="toc-number">2.2.</span> <span class="toc-text">skeleton-instrument</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%A6%E6%88%B7%E8%A1%8C-Account-Bank"><span class="toc-number">3.</span> <span class="toc-text">账户行(Account Bank)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E9%87%91%E6%89%98%E7%AE%A1-Custody"><span class="toc-number">4.</span> <span class="toc-text">资金托管(Custody)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%A8%E5%A2%83%E6%94%AF%E4%BB%98-Principe-Paying-Agent"><span class="toc-number">5.</span> <span class="toc-text">跨境支付(Principe Paying Agent)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%91%E7%AE%A1%E5%AE%A1%E6%9F%A5-Sanction-Screening"><span class="toc-number">6.</span> <span class="toc-text">监管审查(Sanction Screening)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#swift-message"><span class="toc-number">7.</span> <span class="toc-text">swift-message</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#maintenance"><span class="toc-number">8.</span> <span class="toc-text">maintenance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mail-service"><span class="toc-number">9.</span> <span class="toc-text">mail-service</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#payment-workflow"><span class="toc-number">10.</span> <span class="toc-text">payment-workflow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rate-fixing"><span class="toc-number">11.</span> <span class="toc-text">rate-fixing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ETL"><span class="toc-number">12.</span> <span class="toc-text">ETL</span></a></li></ol></div></div><div class="post-content"><p>总结一下项目：代理和信托(Agency and Trust)</p>
<span id="more"></span>

<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>代理和信托是一个存在很久（20年+）的项目，客户端是安装在 Windows 上一个应用程序，服务端是 c#，2020 年开始，决定迁移到更现代化的 web 系统来取代 Windows 上的程序，新项目使用微服务架构，技术栈 SpringBoot + Angular + Openshift，共用 Oracle 数据库。</p>
<p>原始功能非常庞大，有一定的业务壁垒，整个迁移周期也是逐渐拉长，目前已经摊开了 40+ 服务模块（前后端各 20+），规划也排到了 2028 年。</p>
<p>以下列举我接触到的模块，模块开发采用<code>充血模型</code>，按照 ops（运营操作人员） 的需求，一点点往里面添加。</p>
<h2 id="债券发行-Issuance"><a href="#债券发行-Issuance" class="headerlink" title="债券发行(Issuance)"></a>债券发行(Issuance)</h2><p>ops 在和 发行人，投资人等多方敲定好后，会准备一个 Excel 表格，列出要发行的债券发行号，金额，币种，发行人信息，债券类别等信息。系统根据 Excel 信息创建债券。原始的创建流程，包含了多个步骤，需要 ops 跟着 sop 一步一步操作，耗时且有一定操作错误的可能性，在新的系统上，我们设计了一个 file-mapper 模块，将债券创建的流程自动化。</p>
<h3 id="file-mapper"><a href="#file-mapper" class="headerlink" title="file-mapper"></a>file-mapper</h3><p>和 ops 预定义债券发行的模版，系统会预配置每个模版所包含的所有需要的字段，字段属性，格式，默认值等。</p>
<p>ops 在上传 excel 前，需要先选择模版，并基于此创建一个配置，该配置包含所有必选字段，可增删可选字段，设置字段的位置，默认值等。</p>
<p>ops 选择配置，并上传 excel，系统会解析并自动创建债券，提供结果页显示成功和失败的记录，方便参考和修改。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">-- PREDINE TEMPLATE DATA (STATIC DATA) IN BELOW TWO TABLES.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> FM_TEMPLATE (</span><br><span class="line">  ID NUMBER AUTO_INCREMENT,</span><br><span class="line">  TYPE <span class="type">VARCHAR</span>(<span class="number">16</span>), <span class="comment">-- ISSUANCE CREATE/UPDATE , RATE-FIXING, CUTODY</span></span><br><span class="line">  NAME <span class="type">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">  CREATED_AT <span class="type">DATE</span>,</span><br><span class="line">  UPDATED_AT <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> FM_TEMPLATE_COLS (</span><br><span class="line">  ID NUMBER AUTO_INCREMENT,</span><br><span class="line">  TEMPLATE_ID NUMBER,</span><br><span class="line">  NAME <span class="type">VARCHAR</span>(<span class="number">32</span>),</span><br><span class="line">  TYPE <span class="type">VARCHAR</span>(<span class="number">16</span>),</span><br><span class="line">  INDEX NUMBER,</span><br><span class="line">  DFT_VAL <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">  REQUIRED <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">  FORMAT <span class="type">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">  CREATED_AT <span class="type">DATE</span>,</span><br><span class="line">  UPDATED_AT <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- END</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- USER CREATE DATA IN BELOW TWO TABLES</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> FM_CONFIGURATION_TEMPLATE (</span><br><span class="line">  ID NUMBER AUTO_INCREMENT,</span><br><span class="line">  CONFIG_NAME_PREFIX <span class="type">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">  TEMPLATE_ID NUMBER,</span><br><span class="line">  HAS_HEADER <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">  HEADER_CNT NUMBER,</span><br><span class="line">  CREATED_AT <span class="type">DATE</span>,</span><br><span class="line">  UPDATED_AT <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> FM_CONFIGURATION (</span><br><span class="line">  ID NUMBER AUTO_INCREMENT,</span><br><span class="line">  CONFIG_TEMPLATE_ID NUMBER,</span><br><span class="line">  CONFIG_NAME <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">  COL_ID NUMBER,</span><br><span class="line">  COL_IDX NUMBER,</span><br><span class="line">  DFT_VAL <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">  CREATED_AT <span class="type">DATE</span>,</span><br><span class="line">  UPDATED_AT <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- END</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="skeleton-instrument"><a href="#skeleton-instrument" class="headerlink" title="skeleton-instrument"></a>skeleton-instrument</h3><p>一个金融交易的骨架，大致包含如下信息</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;instrument_id&quot;</span>: <span class="string">&quot;FIN-INSTR-2023-0001&quot;</span>,  <span class="comment">// 金融工具唯一标识符</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;CREDIT&quot;</span>,  <span class="comment">// 类型：CREDIT(信用类)/EQUITY(权益类)/DERIVATIVE(衍生类)/PAYMENT(支付类)</span></span><br><span class="line">  <span class="attr">&quot;sub_type&quot;</span>: <span class="string">&quot;LETTER_OF_CREDIT&quot;</span>,  <span class="comment">// 子类型：如信用证、债券、汇票等</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">&quot;issuer&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;entity_id&quot;</span>: <span class="string">&quot;BANK-001&quot;</span>,  <span class="comment">// 发行机构ID</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Global Trade Bank&quot;</span>,  <span class="comment">// 发行机构名称</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;BANK&quot;</span>,  <span class="comment">// 发行机构类型：银行、企业、政府等</span></span><br><span class="line">    <span class="attr">&quot;country&quot;</span>: <span class="string">&quot;US&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;credit_rating&quot;</span>: <span class="string">&quot;AA+&quot;</span>  <span class="comment">// 发行机构信用评级</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="attr">&quot;counterparty&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;entity_id&quot;</span>: <span class="string">&quot;CLIENT-12345&quot;</span>,  <span class="comment">// 交易对手ID</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;International Trading Co.&quot;</span>,  <span class="comment">// 交易对手名称</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;CORPORATE&quot;</span>,  <span class="comment">// 类型：企业、个人等</span></span><br><span class="line">    <span class="attr">&quot;country&quot;</span>: <span class="string">&quot;DE&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="attr">&quot;terms&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;currency&quot;</span>: <span class="string">&quot;USD&quot;</span>,  <span class="comment">// 货币单位</span></span><br><span class="line">    <span class="attr">&quot;principal_amount&quot;</span>: <span class="number">500000.00</span>,  <span class="comment">// 本金金额</span></span><br><span class="line">    <span class="attr">&quot;issue_date&quot;</span>: <span class="string">&quot;2023-11-15&quot;</span>,  <span class="comment">// 发行日期</span></span><br><span class="line">    <span class="attr">&quot;maturity_date&quot;</span>: <span class="string">&quot;2024-11-15&quot;</span>,  <span class="comment">// 到期日</span></span><br><span class="line">    <span class="attr">&quot;interest_rate&quot;</span>: &#123;  <span class="comment">// 利率条款（如适用）</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;FIXED&quot;</span>,  <span class="comment">// 固定/浮动</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span>: <span class="number">3.5</span>,  <span class="comment">// 利率值</span></span><br><span class="line">      <span class="attr">&quot;basis&quot;</span>: <span class="string">&quot;ANNUAL&quot;</span>  <span class="comment">// 计息基础</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;payment_schedule&quot;</span>: [  <span class="comment">// 支付计划（如适用）</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;due_date&quot;</span>: <span class="string">&quot;2024-05-15&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;amount&quot;</span>: <span class="number">8750.00</span>,</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;INTEREST&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;due_date&quot;</span>: <span class="string">&quot;2024-11-15&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;amount&quot;</span>: <span class="number">508750.00</span>,</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;PRINCIPAL_AND_INTEREST&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="attr">&quot;collateral&quot;</span>: &#123;  <span class="comment">// 抵押品信息（如适用）</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;REAL_ESTATE&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Commercial property in Berlin&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;value&quot;</span>: <span class="number">750000.00</span>,</span><br><span class="line">    <span class="attr">&quot;valuation_date&quot;</span>: <span class="string">&quot;2023-11-01&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="attr">&quot;governing_terms&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;law_jurisdiction&quot;</span>: <span class="string">&quot;New York, USA&quot;</span>,  <span class="comment">// 适用法律管辖地</span></span><br><span class="line">    <span class="attr">&quot;dispute_resolution&quot;</span>: <span class="string">&quot;ARBITRATION&quot;</span>,  <span class="comment">// 争议解决方式</span></span><br><span class="line">    <span class="attr">&quot;amendment_provisions&quot;</span>: <span class="string">&quot;REQUIRES_ALL_PARTIES&quot;</span>  <span class="comment">// 修改条款</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;ACTIVE&quot;</span>,  <span class="comment">// 状态：DRAFT/ACTIVE/EXPIRED/CANCELLED</span></span><br><span class="line">  <span class="attr">&quot;events&quot;</span>: [  <span class="comment">// 事件记录</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;event_type&quot;</span>: <span class="string">&quot;ISSUED&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;timestamp&quot;</span>: <span class="string">&quot;2023-11-15T10:30:00Z&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Instrument issued by Global Trade Bank&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="账户行-Account-Bank"><a href="#账户行-Account-Bank" class="headerlink" title="账户行(Account Bank)"></a>账户行(Account Bank)</h2><p>账户行即一家银行在另一家银行开立账户，并通过该账户进行跨境支付，清算等金融服务。</p>
<p>新系统对账户行迁移了两块重要内容。</p>
<ol>
<li><p>展示清算通知的记录（receive-queue），即以 MT910 为核心的 record，MT910 是账户行在资金接收环节中，向账户持有人传递到账信息的核心工具，是清算的通知凭证。</p>
</li>
<li><p>对符合要求的账单，自动进去结算(MT103&#x2F;MT202)，（工作日 9 - 6 点，每 15 mins）</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">autoPaymentRelease</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> payments = getValidatedPayments();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> p : payments) &#123;</span><br><span class="line">    releasePayment(p);</span><br><span class="line">    sendSwiftMessage();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="资金托管-Custody"><a href="#资金托管-Custody" class="headerlink" title="资金托管(Custody)"></a>资金托管(Custody)</h2><ol>
<li><p>托管账号管理 (safekeeping account)，默认从 swift message 中解析创建，也可系统创建，支持设置账号对应的客户邮箱。</p>
</li>
<li><p>MT537 (Pending Transactions Advice)，未完成交易通知。用于证券账户服务机构（如托管银行）向账户持有人报告所有未完成的证券交易状态（如待结算、待确认的交易）。</p>
<p> 当系统收到 mt537 时，</p>
<ul>
<li>解析到具体的账号，关联对应的罚款信息。</li>
<li>按日&#x2F;月生成 pdf penalty 信息</li>
<li>将 penalty pdf 发往相应的客户</li>
</ul>
</li>
<li><p>payment instruction flow</p>
</li>
</ol>
<ul>
<li>构建基于邮件的 payment 流程。 含盖 receive&#x2F;authorise&#x2F;signature&#x2F;completed 等阶段。</li>
</ul>
<h2 id="跨境支付-Principe-Paying-Agent"><a href="#跨境支付-Principe-Paying-Agent" class="headerlink" title="跨境支付(Principe Paying Agent)"></a>跨境支付(Principe Paying Agent)</h2><p>PPA 常见于国际债券发行（如欧洲债券、全球债券）或跨市场发行的债务工具中，由于持有人分布在不同国家 &#x2F; 地区，需要通过 PPA 统一协调付款流程，确保跨境支付的效率和合规性。</p>
<ol>
<li>payment authorise &amp; release</li>
<li>funding authorise &amp; release</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">paymentRelease</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    releaseFunding();</span><br><span class="line">  &#125; <span class="keyword">catch</span>(Exception ex) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  validateStatus();</span><br><span class="line">  checkBalance();</span><br><span class="line">  updateStatusDenomination();</span><br><span class="line">  sendSwiftMessage();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="监管审查-Sanction-Screening"><a href="#监管审查-Sanction-Screening" class="headerlink" title="监管审查(Sanction Screening)"></a>监管审查(Sanction Screening)</h2><ol>
<li>MT series messages screening</li>
<li>ISO messages screening</li>
<li>build message Canonical model to unify screening process.</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">performScreening</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> hdr = generateXmlHeader();</span><br><span class="line">  <span class="keyword">var</span> body = generateXmlBody();</span><br><span class="line">  sendToMqForScreening(<span class="keyword">new</span> String(hdr+<span class="string">&quot;\n&quot;</span>+body));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="swift-message"><a href="#swift-message" class="headerlink" title="swift-message"></a>swift-message</h2><ol>
<li>central entry for all kinds of incoming messages.</li>
</ol>
<h2 id="maintenance"><a href="#maintenance" class="headerlink" title="maintenance"></a>maintenance</h2><ol>
<li>payment currency cutoff time </li>
<li>payment threshold（checker 1&#x2F;2&#x2F;3）</li>
</ol>
<h2 id="mail-service"><a href="#mail-service" class="headerlink" title="mail-service"></a>mail-service</h2><ol>
<li>reading payment instruction emails from specified mailboxes</li>
</ol>
<h2 id="payment-workflow"><a href="#payment-workflow" class="headerlink" title="payment-workflow"></a>payment-workflow</h2><p>real payment processing for PPA&#x2F;IPA&#x2F;ACCOUNT-BANK</p>
<h2 id="rate-fixing"><a href="#rate-fixing" class="headerlink" title="rate-fixing"></a>rate-fixing</h2><h2 id="ETL"><a href="#ETL" class="headerlink" title="ETL"></a>ETL</h2><ol>
<li>spring-batch jobs for different kinds of feeds</li>
<li>spring-integration poller tasks for differnet eip flow</li>
</ol>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.0"><p><span>Title: </span>代理和信托-项目总结</p><p><span>Author: </span>Jiandong</p><p><span>Date: </span>2025-08-08</p><p><span>Last Update: </span>2025-08-11</p><p><span>Blog Link: </span><a href="/2025/08/08/time-in-citi/">https://mjd507.github.io/2025/08/08/time-in-citi/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://mjd507.github.io/2025/08/08/time-in-citi/"></i></span></p><p><span>Copyright Declaration: </span>Please refer carefully, most of the content I have not fully mastered.</p></div><br><div class="tags"></div><div class="post-nav"><a class="next" href="/2025/07/27/RestClient/">RestClient</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="https://unpkg.com/gitalk/dist/gitalk.css"><script type="text/javascript" src="https://unpkg.com/blueimp-md5/js/md5.js"></script><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
  clientID: 'fa8d49cc90698365347d',
  clientSecret: 'ad101f458b7f3950fccc09b931977c106cd2c467',
  repo: 'mjd507.github.io',
  owner: 'mjd507',
  admin: ['mjd507'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Big-Back-End/">Big-Back-End</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Big-Front-End/">Big-Front-End</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://dashaun.com/posts/" title="DaShaun Carter" target="_blank">DaShaun Carter</a><ul></ul><a href="https://develotters.com/" title="develotters" target="_blank">develotters</a><ul></ul><a href="https://vladmihalcea.com/blog/" title="Vlad Mihalcea" target="_blank">Vlad Mihalcea</a><ul></ul><a href="https://www.danvega.dev/blog/" title="Dan Vega" target="_blank">Dan Vega</a><ul></ul><a href="https://imququ.com/" title="Jerry Qu" target="_blank">Jerry Qu</a><ul></ul><a href="https://www.techtalksweekly.io/" title="Tech Talks Weekly" target="_blank">Tech Talks Weekly</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">Jiandong.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>